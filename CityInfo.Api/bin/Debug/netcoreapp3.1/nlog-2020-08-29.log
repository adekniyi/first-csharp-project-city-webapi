2020-08-29 08:52:00.9556|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 08:52:03.3318|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 08:52:05.3188|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 08:52:05.4348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 08:52:05.4778|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 08:52:15.9215|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (391ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 08:52:16.0038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (77ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 08:52:16.0123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 08:52:16.1267|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 08:52:16.1267|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 08:52:16.1532|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 08:52:16.1532|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 08:52:16.1848|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 08:52:16.2184|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 08:52:16.2184|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 08:52:16.2312|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 08:52:16.2312|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 08:52:16.2460|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 08:52:16.2460|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 08:52:16.2579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 08:52:16.2579|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 08:52:16.3208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 08:52:16.3208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 08:52:16.3410|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 08:52:16.3531|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 08:52:16.3531|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 08:52:16.3531|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 08:52:16.3761|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 08:52:16.3761|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 08:52:16.3875|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 08:52:16.5970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (206ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 08:52:16.6022|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 08:52:16.6267|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 08:52:16.6335|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 08:52:16.6335|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 08:52:16.6335|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 08:52:16.6335|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 08:52:16.6523|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 08:52:16.6523|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 08:52:16.6669|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 08:52:16.6669|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 08:52:16.6669|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 08:52:16.6820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 08:52:16.6820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 08:52:16.6971|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 08:52:16.6971|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 08:52:16.6971|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 08:52:16.7126|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 08:52:16.7623|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 08:52:16.9806|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 08:52:16.9806|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 08:52:16.9806|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 08:52:17.0267|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 08:52:17.1379|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 112.5799ms 404 text/plain
2020-08-29 08:52:17.2240|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/favicon.ico  
2020-08-29 08:52:17.2288|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 4.8721ms 404 text/plain
2020-08-29 08:52:25.8152|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/3  
2020-08-29 08:52:25.8489|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "CityControllers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityInfo.Api.Contollers.CityControllers (CityInfo.Api).
2020-08-29 08:52:25.9013|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 08:52:26.1687|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[id] = @__cityId_0
2020-08-29 08:52:26.2074|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.CityDtoWithOutPointOfInterest'.
2020-08-29 08:52:26.2303|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.CityControllers.GetCity (CityInfo.Api) in 371.9232ms
2020-08-29 08:52:26.2303|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 422.2318ms 200 application/json; charset=utf-8
2020-08-29 08:52:35.7415|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1  
2020-08-29 08:52:35.7476|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "CityControllers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityInfo.Api.Contollers.CityControllers (CityInfo.Api).
2020-08-29 08:52:35.8034|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 08:52:35.8135|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[id] = @__cityId_0
2020-08-29 08:52:35.8135|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.CityDtoWithOutPointOfInterest'.
2020-08-29 08:52:35.8228|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.CityControllers.GetCity (CityInfo.Api) in 70.8369ms
2020-08-29 08:52:35.8228|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 85.7666ms 200 application/json; charset=utf-8
2020-08-29 08:52:53.1187|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1/pointsofinterest  
2020-08-29 08:52:53.1187|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 08:52:53.1378|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 08:52:53.1590|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 08:52:53.1739|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE [p].[cityId] = @__cityId_0
2020-08-29 08:52:53.1808|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.Api.Models.PointOfInterestDto, CityInfo.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2020-08-29 08:52:53.1808|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 56.3468ms
2020-08-29 08:52:53.1808|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 74.8469ms 200 application/json; charset=utf-8
2020-08-29 08:53:05.5545|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/2/pointsofinterest  
2020-08-29 08:53:05.5611|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 08:53:05.5713|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 08:53:05.5713|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 08:53:05.5713|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE [p].[cityId] = @__cityId_0
2020-08-29 08:53:05.5886|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.Api.Models.PointOfInterestDto, CityInfo.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2020-08-29 08:53:05.5886|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 28.077ms
2020-08-29 08:53:05.5886|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 43.7732ms 200 application/json; charset=utf-8
2020-08-29 08:53:18.6068|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/2/pointsofinterest/3  
2020-08-29 08:53:18.6068|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 08:53:18.6247|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 08:53:18.6247|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 08:53:18.6514|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 08:53:18.6514|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.PointOfInterestDto'.
2020-08-29 08:53:18.6514|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 40.8542ms
2020-08-29 08:53:18.6646|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 58.0972ms 200 application/json; charset=utf-8
2020-08-29 08:53:27.5424|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/3/pointsofinterest/5  
2020-08-29 08:53:27.5424|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 08:53:27.5555|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 08:53:27.5555|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 08:53:27.5555|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 08:53:27.5718|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.PointOfInterestDto'.
2020-08-29 08:53:27.5718|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 23.5501ms
2020-08-29 08:53:27.5718|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 38.3823ms 200 application/json; charset=utf-8
2020-08-29 08:53:33.8992|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/3/pointsofinterest/10  
2020-08-29 08:53:33.8992|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 08:53:33.8992|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 08:53:33.9173|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 08:53:33.9173|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 08:53:33.9173|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2020-08-29 08:53:33.9377|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 28.1359ms
2020-08-29 08:53:33.9377|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 42.0769ms 404 application/problem+json; charset=utf-8
2020-08-29 09:31:18.2084|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 09:31:20.1179|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:31:21.3684|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:31:21.4445|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 09:31:21.4783|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 09:31:31.9383|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (425ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 09:31:32.0316|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (88ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 09:31:32.0316|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:31:32.1511|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 09:31:32.1511|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:31:32.1818|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 09:31:32.1818|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 09:31:32.2145|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 09:31:32.2529|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 09:31:32.2588|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 09:31:32.2588|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 09:31:32.2588|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 09:31:32.2811|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 09:31:32.2898|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 09:31:32.2898|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 09:31:32.2898|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 09:31:32.3485|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:31:32.3587|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:31:32.3686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:31:32.3686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 09:31:32.3849|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 09:31:32.3849|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 09:31:32.4020|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 09:31:32.4020|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 09:31:32.4020|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 09:31:32.6347|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (219ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 09:31:32.6347|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 09:31:32.6347|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 09:31:32.6522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:31:32.6522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 09:31:32.6648|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 09:31:32.6648|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 09:31:32.6648|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 09:31:32.6811|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 09:31:32.6811|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 09:31:32.6811|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 09:31:32.6962|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 09:31:32.6962|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 09:31:32.6962|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 09:31:32.7123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:31:32.7123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 09:31:32.7123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 09:31:32.7289|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 09:31:32.7554|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 09:31:32.8803|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 09:31:32.8834|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 09:31:32.8834|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 09:31:32.9070|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 09:31:32.9689|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 63.3452ms 404 text/plain
2020-08-29 09:31:41.4201|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities  
2020-08-29 09:31:41.4426|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCities", controller = "CityControllers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCities() on controller CityInfo.Api.Contollers.CityControllers (CityInfo.Api).
2020-08-29 09:31:41.6366|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:31:41.8723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [c].[id], [c].[Description], [c].[Name], [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [Cities] AS [c]
LEFT JOIN [pointsOfInterest] AS [p] ON [c].[id] = [p].[cityId]
ORDER BY [c].[id], [p].[id]
2020-08-29 09:31:41.9511|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.Api.Models.CityDtoWithOutPointOfInterest, CityInfo.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2020-08-29 09:31:41.9751|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.CityControllers.GetCities (CityInfo.Api) in 520.8791ms
2020-08-29 09:31:41.9808|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 560.5489ms 200 application/json; charset=utf-8
2020-08-29 09:37:53.3360|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 09:37:55.2537|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:37:56.4189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:37:56.4993|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 09:37:56.5345|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 09:38:06.9552|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (380ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 09:38:07.0553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (95ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 09:38:07.1357|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:38:07.2449|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 09:38:07.2449|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:38:07.2734|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 09:38:07.2832|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 09:38:07.3051|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 09:38:07.3448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 09:38:07.3448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 09:38:07.3546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 09:38:07.3546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 09:38:07.3703|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 09:38:07.3703|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 09:38:07.3836|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 09:38:07.3836|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 09:38:07.4500|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:38:07.4500|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:38:07.4713|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:38:07.4865|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 09:38:07.4865|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 09:38:07.4941|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 09:38:07.5099|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 09:38:07.5099|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 09:38:07.5099|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 09:38:07.7174|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (192ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 09:38:07.7174|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 09:38:07.7174|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 09:38:07.7347|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:38:07.7347|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 09:38:07.7448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 09:38:07.7448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 09:38:07.7721|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 09:38:07.7791|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 09:38:07.7791|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 09:38:07.7904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 09:38:07.7904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 09:38:07.7904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 09:38:07.7904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 09:38:07.8095|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:38:07.8095|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 09:38:07.8208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 09:38:07.8208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 09:38:07.8466|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 09:38:07.9838|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 09:38:07.9838|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 09:38:07.9838|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 09:38:08.0108|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 09:38:08.0709|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 61.5598ms 404 text/plain
2020-08-29 09:38:21.9678|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1  
2020-08-29 09:38:22.0103|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "CityControllers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityInfo.Api.Contollers.CityControllers (CityInfo.Api).
2020-08-29 09:38:22.2276|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:38:22.4793|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (49ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[id] = @__cityId_0
2020-08-29 09:39:15.7354|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 09:39:17.9701|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:39:18.4002|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:39:18.4696|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 09:39:18.4970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 09:39:28.9540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (403ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 09:39:29.0297|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (71ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 09:39:29.0297|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:39:29.1448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 09:39:29.1506|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:39:29.1723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 09:39:29.1806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 09:39:29.2040|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 09:39:29.2415|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 09:39:29.2470|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 09:39:29.2470|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 09:39:29.2470|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 09:39:29.2657|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 09:39:29.2737|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 09:39:29.2737|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 09:39:29.2737|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 09:39:29.3262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:39:29.3262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:39:29.3474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:39:29.3598|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 09:39:29.3598|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 09:39:29.3678|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 09:39:29.3678|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 09:39:29.3869|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 09:39:29.3869|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 09:39:29.5400|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (144ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 09:39:29.5400|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 09:39:29.5400|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 09:39:29.5555|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:39:29.5813|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 09:39:29.5813|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 09:39:29.5890|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 09:39:29.5890|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 09:39:29.5890|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 09:39:29.6078|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 09:39:29.6078|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 09:39:29.6178|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 09:39:29.6178|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 09:39:29.6178|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 09:39:29.6359|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:39:29.6359|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 09:39:29.6359|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 09:39:29.6522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 09:39:29.6783|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 09:39:29.7951|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 09:39:29.7951|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 09:39:29.7951|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 09:39:29.8207|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 09:39:29.8843|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 64.8922ms 404 text/plain
2020-08-29 09:39:37.6038|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1  
2020-08-29 09:39:37.6352|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "CityControllers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityInfo.Api.Contollers.CityControllers (CityInfo.Api).
2020-08-29 09:39:37.8611|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:39:38.0855|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[id] = @__cityId_0
2020-08-29 09:40:48.7750|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 09:40:50.9795|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:40:51.3843|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:40:51.4805|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 09:40:51.5125|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 09:41:01.9461|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (390ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 09:41:02.0397|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (89ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 09:41:02.1191|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:41:02.2293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 09:41:02.2293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:41:02.2552|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 09:41:02.2634|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 09:41:02.2838|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 09:41:02.3208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 09:41:02.3208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 09:41:02.3208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 09:41:02.3208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 09:41:02.3440|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 09:41:02.3440|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 09:41:02.3551|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 09:41:02.3551|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 09:41:02.4168|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:41:02.4168|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:41:02.4393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:41:02.4538|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 09:41:02.4538|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 09:41:02.4627|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 09:41:02.4788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 09:41:02.4788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 09:41:02.4788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 09:41:02.6355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (141ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 09:41:02.6355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 09:41:02.6355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 09:41:02.6526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:41:02.6526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 09:41:02.6526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 09:41:02.6671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 09:41:02.6671|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 09:41:02.6671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 09:41:02.7064|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 09:41:02.7064|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 09:41:02.7155|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 09:41:02.7155|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 09:41:02.7155|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 09:41:02.7297|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:41:02.7297|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 09:41:02.7297|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 09:41:02.7437|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 09:41:02.7678|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 09:41:02.8848|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 09:41:02.8848|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 09:41:02.8848|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 09:41:02.9090|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 09:41:02.9671|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 60.0805ms 404 text/plain
2020-08-29 09:41:07.8650|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1  
2020-08-29 09:41:07.9045|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "CityControllers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityInfo.Api.Contollers.CityControllers (CityInfo.Api).
2020-08-29 09:41:08.1114|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:41:08.3255|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[id] = @__cityId_0
2020-08-29 09:41:08.3668|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.CityDtoWithOutPointOfInterest'.
2020-08-29 09:41:08.3836|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.CityControllers.GetCity (CityInfo.Api) in 470.987ms
2020-08-29 09:41:08.3836|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 524.9667ms 200 application/json; charset=utf-8
2020-08-29 09:41:19.6027|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1?includepointsofinterest=true  
2020-08-29 09:41:19.6027|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "CityControllers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityInfo.Api.Contollers.CityControllers (CityInfo.Api).
2020-08-29 09:41:19.6556|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:41:19.7220|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[id], [t].[Description], [t].[Name], [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM (
    SELECT TOP(1) [c].[id], [c].[Description], [c].[Name]
    FROM [Cities] AS [c]
    WHERE [c].[id] = @__cityId_0
) AS [t]
LEFT JOIN [pointsOfInterest] AS [p] ON [t].[id] = [p].[cityId]
ORDER BY [t].[id], [p].[id]
2020-08-29 09:47:21.7959|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 09:47:23.6491|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:47:24.9628|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:47:25.0409|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 09:47:25.0831|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 09:47:35.8733|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (756ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 09:47:35.9894|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (112ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 09:47:35.9974|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:47:36.1064|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 09:47:36.1064|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:47:36.1320|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 09:47:36.1401|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 09:47:36.1607|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 09:47:36.1969|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 09:47:36.1969|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 09:47:36.1969|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 09:47:36.2133|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 09:47:36.2133|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 09:47:36.2305|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 09:47:36.2305|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 09:47:36.2305|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 09:47:36.2958|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:47:36.3073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:47:36.3073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:47:36.3322|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 09:47:36.3363|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 09:47:36.3363|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 09:47:36.3560|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 09:47:36.3560|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 09:47:36.3560|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 09:47:36.5962|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (226ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 09:47:36.5962|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 09:47:36.6055|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 09:47:36.6055|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:47:36.6221|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 09:47:36.6221|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 09:47:36.6221|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 09:47:36.6368|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 09:47:36.6368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 09:47:36.6537|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 09:47:36.6537|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 09:47:36.6537|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 09:47:36.6687|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 09:47:36.6687|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 09:47:36.6806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:47:36.6806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 09:47:36.6806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 09:47:36.6978|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 09:47:36.7210|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 09:47:36.8378|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 09:47:36.8378|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 09:47:36.8378|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 09:47:36.8660|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 09:47:36.9353|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 71.8519ms 404 text/plain
2020-08-29 09:47:43.7891|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1?includepointsofinterest=true  
2020-08-29 09:47:43.8226|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "CityControllers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityInfo.Api.Contollers.CityControllers (CityInfo.Api).
2020-08-29 09:47:44.0501|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:47:44.3446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[id], [t].[Description], [t].[Name], [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM (
    SELECT TOP(1) [c].[id], [c].[Description], [c].[Name]
    FROM [Cities] AS [c]
    WHERE [c].[id] = @__cityId_0
) AS [t]
LEFT JOIN [pointsOfInterest] AS [p] ON [t].[id] = [p].[cityId]
ORDER BY [t].[id], [p].[id]
2020-08-29 09:47:44.4062|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.CityDTo'.
2020-08-29 09:47:44.4279|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.CityControllers.GetCity (CityInfo.Api) in 597.5389ms
2020-08-29 09:47:44.4344|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 645.1708ms 200 application/json; charset=utf-8
2020-08-29 09:51:29.9224|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 09:51:31.9269|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:51:32.3013|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:51:32.3843|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 09:51:32.4142|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 09:51:42.7920|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (340ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 09:51:42.8684|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 09:51:42.8684|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:51:42.9892|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 09:51:42.9941|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:51:43.0171|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 09:51:43.0259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 09:51:43.0464|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 09:51:43.0801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 09:51:43.0801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 09:51:43.0895|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 09:51:43.1150|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 09:51:43.1254|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 09:51:43.1352|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 09:51:43.1352|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 09:51:43.1352|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 09:51:43.1971|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:51:43.2262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:51:43.2353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:51:43.2491|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 09:51:43.2491|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 09:51:43.2491|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 09:51:43.2693|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 09:51:43.2756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 09:51:43.2756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 09:51:43.4354|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (152ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 09:51:43.4354|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 09:51:43.4354|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 09:51:43.4525|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:51:43.4525|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 09:51:43.4658|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 09:51:43.4658|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 09:51:43.4658|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 09:51:43.4807|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 09:51:43.4807|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 09:51:43.4926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 09:51:43.4926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 09:51:43.4926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 09:51:43.4926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 09:51:43.5147|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:51:43.5147|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 09:51:43.5284|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 09:51:43.5284|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 09:51:43.5557|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 09:51:43.6926|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 09:51:43.6953|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 09:51:43.6953|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 09:51:43.7168|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 09:51:43.7763|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 60.3672ms 404 text/plain
2020-08-29 09:51:49.3062|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/3/pointsofinterest  
2020-08-29 09:51:49.3726|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 09:51:49.5998|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:51:49.8321|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 09:51:49.8660|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE [p].[cityId] = @__cityId_0
2020-08-29 09:51:49.9564|FATAL|CityInfo.Api.Contollers.PointOfInterestController|Exception while getting point of interest for the id 3
2020-08-29 09:51:49.9630|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.String'.
2020-08-29 09:51:49.9792|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 593.0979ms
2020-08-29 09:51:49.9792|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 681.146ms 500 text/plain; charset=utf-8
2020-08-29 09:52:32.4586|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 09:52:34.5166|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:52:34.8916|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:52:34.9702|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 09:52:34.9978|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 09:52:45.8074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (767ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 09:52:45.9374|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 09:52:45.9374|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:52:46.0475|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 09:52:46.0475|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:52:46.0735|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 09:52:46.0735|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 09:52:46.1039|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 09:52:46.1394|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 09:52:46.1394|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 09:52:46.1494|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 09:52:46.1494|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 09:52:46.1494|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 09:52:46.1716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 09:52:46.1716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 09:52:46.1716|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 09:52:46.2321|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:52:46.2423|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:52:46.2423|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:52:46.2633|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 09:52:46.2633|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 09:52:46.2633|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 09:52:46.2844|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 09:52:46.2903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 09:52:46.2903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 09:52:46.4777|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (177ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 09:52:46.4777|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 09:52:46.4777|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 09:52:46.4938|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:52:46.4938|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 09:52:46.4938|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 09:52:46.5111|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 09:52:46.5111|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 09:52:46.5249|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 09:52:46.5249|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 09:52:46.5249|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 09:52:46.5409|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 09:52:46.5409|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 09:52:46.5409|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 09:52:46.5562|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:52:46.5562|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 09:52:46.5562|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 09:52:46.5740|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 09:52:46.5978|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 09:52:46.7249|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 09:52:46.7279|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 09:52:46.7279|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 09:52:46.7502|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 09:52:46.8119|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 63.2874ms 404 text/plain
2020-08-29 09:53:02.7883|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/3/pointsofinterest  
2020-08-29 09:53:02.8184|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 09:53:03.0293|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:53:03.2340|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 09:53:03.2705|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE [p].[cityId] = @__cityId_0
2020-08-29 09:53:03.3180|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.Api.Models.PointOfInterestDto, CityInfo.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2020-08-29 09:53:03.3355|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 509.1261ms
2020-08-29 09:53:03.3410|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 552.6769ms 200 application/json; charset=utf-8
2020-08-29 09:55:38.0557|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 09:55:39.9466|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:55:40.3327|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:55:40.4280|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 09:55:40.4618|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 09:55:50.9177|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (413ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 09:55:50.9974|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (75ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 09:55:50.9974|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:55:51.1223|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 09:55:51.1223|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 09:55:51.1488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 09:55:51.1573|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 09:55:51.1773|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 09:55:51.2123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 09:55:51.2123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 09:55:51.2123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 09:55:51.2123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 09:55:51.2361|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 09:55:51.2444|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 09:55:51.2444|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 09:55:51.2444|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 09:55:51.2909|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:55:51.2909|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:55:51.3095|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 09:55:51.3238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 09:55:51.3238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 09:55:51.3238|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 09:55:51.3436|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 09:55:51.3436|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 09:55:51.3545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 09:55:51.5106|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (153ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 09:55:51.5106|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 09:55:51.5106|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 09:55:51.5262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:55:51.5262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 09:55:51.5262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 09:55:51.5412|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 09:55:51.5412|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 09:55:51.5412|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 09:55:51.5598|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 09:55:51.5598|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 09:55:51.5598|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 09:55:51.5732|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 09:55:51.5732|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 09:55:51.5732|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 09:55:51.5907|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 09:55:51.5907|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 09:55:51.5907|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 09:55:51.6210|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 09:55:51.7483|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 09:55:51.7483|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 09:55:51.7483|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 09:55:51.7732|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 09:55:51.8292|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 57.6941ms 404 text/plain
2020-08-29 09:57:11.4261|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/3/pointsofinterest/6  
2020-08-29 09:57:11.4685|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 09:57:11.6996|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 09:57:11.9127|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 09:57:11.9468|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 09:57:11.9872|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.PointOfInterestDto'.
2020-08-29 09:57:12.0037|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 526.3571ms
2020-08-29 09:57:12.0103|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 584.0636ms 200 application/json; charset=utf-8
2020-08-29 11:13:07.2314|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 11:13:09.2391|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 11:13:10.5501|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 11:13:10.6318|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 11:13:10.6673|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 11:13:20.9768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (245ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 11:13:21.0310|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (50ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 11:13:21.0400|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 11:13:21.1439|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 11:13:21.1439|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 11:13:21.1745|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 11:13:21.1828|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 11:13:21.2041|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 11:13:21.2369|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 11:13:21.2430|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 11:13:21.2430|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 11:13:21.2430|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 11:13:21.2639|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 11:13:21.2639|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 11:13:21.2768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 11:13:21.2768|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 11:13:21.3269|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 11:13:21.3269|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 11:13:21.3462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 11:13:21.3601|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 11:13:21.3601|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 11:13:21.3698|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 11:13:21.3847|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 11:13:21.3847|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 11:13:21.3847|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 11:13:21.5727|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (173ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 11:13:21.5727|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 11:13:21.5727|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 11:13:21.5914|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 11:13:21.5914|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 11:13:21.6039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 11:13:21.6039|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 11:13:21.6039|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 11:13:21.6233|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 11:13:21.6233|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 11:13:21.6350|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 11:13:21.6350|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 11:13:21.6350|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 11:13:21.6350|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 11:13:21.6546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 11:13:21.6546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 11:13:21.6658|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 11:13:21.6658|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 11:13:21.6938|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 11:13:21.8334|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 11:13:21.8380|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 11:13:21.8380|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 11:13:21.8623|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 11:13:21.9251|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 64.3778ms 404 text/plain
2020-08-29 11:16:16.9539|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST http://localhost:1028/api/cities/3/pointsofinterest application/json 118
2020-08-29 11:16:16.9860|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreatePointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreatePointOfIntrest(Int32, CityInfo.Api.Models.PointOfInterestForCreationDto) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 11:16:17.2714|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 11:16:17.5116|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 11:16:17.5553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [c].[id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[id] = @__cityId_0
2020-08-29 11:16:17.6986|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [pointsOfInterest] ([Description], [Name], [cityId])
VALUES (@p0, @p1, @p2);
SELECT [id]
FROM [pointsOfInterest]
WHERE @@ROWCOUNT = 1 AND [id] = scope_identity();
2020-08-29 11:16:17.7406|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.PointOfInterestDto'.
2020-08-29 11:16:17.7598|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.CreatePointOfIntrest (CityInfo.Api) in 765.63ms
2020-08-29 11:16:17.7598|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 812.6499ms 201 application/json; charset=utf-8
2020-08-29 11:16:26.6646|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/3/pointsofinterest application/json 118
2020-08-29 11:16:26.6752|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 11:16:26.7134|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 11:16:26.7134|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 11:16:26.7314|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE [p].[cityId] = @__cityId_0
2020-08-29 11:16:26.7314|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.Api.Models.PointOfInterestDto, CityInfo.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2020-08-29 11:16:26.7476|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 68.8703ms
2020-08-29 11:16:26.7476|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 86.1971ms 200 application/json; charset=utf-8
2020-08-29 12:05:17.0016|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 12:05:19.0806|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 12:05:20.2475|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 12:05:20.3162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 12:05:20.3553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 12:05:31.1705|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (765ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 12:05:31.2988|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (118ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 12:05:31.3072|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 12:05:31.4162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 12:05:31.4162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 12:05:31.4467|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 12:05:31.4467|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 12:05:31.4747|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 12:05:31.5096|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 12:05:31.5096|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 12:05:31.5096|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 12:05:31.5238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 12:05:31.5238|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 12:05:31.5412|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 12:05:31.5412|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 12:05:31.5412|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 12:05:31.6026|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 12:05:31.6026|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 12:05:31.6235|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 12:05:31.6398|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 12:05:31.6398|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 12:05:31.6492|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 12:05:31.6492|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 12:05:31.6721|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 12:05:31.6721|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 12:05:31.8936|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (213ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 12:05:31.8936|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 12:05:31.9226|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 12:05:31.9331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 12:05:31.9461|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 12:05:31.9461|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 12:05:31.9461|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 12:05:31.9641|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 12:05:31.9641|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 12:05:31.9790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 12:05:31.9790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 12:05:31.9790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 12:05:31.9928|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 12:05:31.9928|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 12:05:32.0132|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 12:05:32.0132|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 12:05:32.0274|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 12:05:32.0274|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 12:05:32.0544|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 12:05:32.1742|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 12:05:32.1742|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 12:05:32.1808|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 12:05:32.2001|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 12:05:32.2662|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 67.2445ms 404 text/plain
2020-08-29 12:06:14.3068|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 122
2020-08-29 12:06:14.3482|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 12:06:14.5884|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 12:06:14.7959|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (29ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 12:06:14.8317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 12:06:14.8834|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.PointOfInterestDto'.
2020-08-29 12:06:14.9016|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 538.9845ms
2020-08-29 12:06:14.9016|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 602.2164ms 200 application/json; charset=utf-8
2020-08-29 12:06:34.2255|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PUT http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 122
2020-08-29 12:06:34.2356|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "UpdatePointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult UpdatePointOfIntrest(Int32, Int32, CityInfo.Api.Models.PointOfInterestForUpdatingDto) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 12:06:34.2897|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 12:06:34.2897|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 12:06:34.3066|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 12:08:24.4896|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 12:08:26.3434|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 12:08:26.6984|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 12:08:26.7588|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 12:08:26.7875|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 12:08:37.2582|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (423ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 12:08:37.3924|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (129ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 12:08:37.4007|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 12:08:37.5008|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 12:08:37.5008|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 12:08:37.5319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 12:08:37.5401|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 12:08:37.5645|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 12:08:37.6060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 12:08:37.6060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 12:08:37.6060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 12:08:37.6221|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 12:08:37.6221|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 12:08:37.6392|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 12:08:37.6392|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 12:08:37.6392|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 12:08:37.7074|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 12:08:37.7173|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 12:08:37.7276|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 12:08:37.7276|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 12:08:37.7469|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 12:08:37.7469|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 12:08:37.7658|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 12:08:37.7658|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 12:08:37.7770|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 12:08:37.9683|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (188ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 12:08:37.9683|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 12:08:37.9782|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 12:08:37.9782|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 12:08:37.9944|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 12:08:37.9944|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 12:08:37.9944|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 12:08:37.9944|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 12:08:38.0150|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 12:08:38.0150|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 12:08:38.0259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 12:08:38.0259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 12:08:38.0259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 12:08:38.0259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 12:08:38.0452|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 12:08:38.0452|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 12:08:38.0586|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 12:08:38.0586|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 12:08:38.0841|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 12:08:38.2214|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 12:08:38.2214|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 12:08:38.2271|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 12:08:38.2443|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 12:08:38.3011|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 58.3816ms 404 text/plain
2020-08-29 12:08:44.7273|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PUT http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 122
2020-08-29 12:08:44.7576|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "UpdatePointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult UpdatePointOfIntrest(Int32, Int32, CityInfo.Api.Models.PointOfInterestForUpdatingDto) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 12:08:45.0433|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 12:08:45.2778|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (44ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 12:08:45.3142|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 12:08:45.4262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 200), @p1='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [pointsOfInterest] SET [Description] = @p0, [Name] = @p1
WHERE [id] = @p2;
SELECT @@ROWCOUNT;
2020-08-29 12:08:45.4463|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing HttpStatusCodeResult, setting HTTP status code 204
2020-08-29 12:08:45.4463|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.UpdatePointOfIntrest (CityInfo.Api) in 689.4048ms
2020-08-29 12:08:45.4625|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 735.7695ms 204 
2020-08-29 12:08:52.3812|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 122
2020-08-29 12:08:52.3922|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 12:08:52.4344|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 12:08:52.4344|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 12:08:52.4474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 12:08:52.4474|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.PointOfInterestDto'.
2020-08-29 12:08:52.4695|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 74.128ms
2020-08-29 12:08:52.4695|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 92.6188ms 200 application/json; charset=utf-8
2020-08-29 14:21:23.7537|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 14:21:29.4036|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 14:21:31.9210|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (63ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 14:21:32.2003|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (110ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 14:21:32.2605|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (54ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 14:21:43.1626|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (792ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 14:21:43.3455|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (169ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 14:21:43.3771|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 14:21:43.8612|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 14:21:43.8704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 14:21:43.9206|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 14:21:43.9375|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 14:21:43.9890|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 14:21:44.0934|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 14:21:44.1038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 14:21:44.1038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 14:21:44.1220|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 14:21:44.1404|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 14:21:44.1573|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 14:21:44.1573|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 14:21:44.1704|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 14:21:44.2869|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (72ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 14:21:44.3121|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 14:21:44.3317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 14:21:44.3665|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 14:21:44.3758|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 14:21:44.3829|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 14:21:44.4222|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 14:21:44.4355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 14:21:44.4462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 14:21:44.9506|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (494ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 14:21:44.9680|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 14:21:44.9829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 14:21:45.0126|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 14:21:45.0321|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 14:21:45.0516|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 14:21:45.0637|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 14:21:45.0783|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 14:21:45.1143|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 14:21:45.1424|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 14:21:45.1598|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 14:21:45.1772|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 14:21:45.1924|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 14:21:45.2065|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 14:21:45.2328|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 14:21:45.2561|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 14:21:45.2785|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 14:21:45.2952|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 14:21:45.4098|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 14:21:45.9435|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 14:21:45.9495|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 14:21:45.9495|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 14:21:46.0059|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 14:21:46.4316|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 428.4186ms 404 text/plain
2020-08-29 14:22:26.0806|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PATCH http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 14:22:26.1474|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "partiallyUpdatedPointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult partiallyUpdatedPointOfIntrest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.Api.Models.PointOfInterestForUpdatingDto]) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 14:22:26.7513|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2020-08-29 14:22:26.7844|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.partiallyUpdatedPointOfIntrest (CityInfo.Api) in 620.8869ms
2020-08-29 14:22:26.7989|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 718.9802ms 400 application/problem+json; charset=utf-8
2020-08-29 14:29:54.9080|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 14:29:59.5426|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 14:30:01.7136|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (61ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 14:30:01.9949|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (102ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 14:30:02.0506|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (49ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 14:30:12.7151|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (568ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 14:30:12.9116|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (185ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 14:30:12.9345|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 14:30:13.2360|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 14:30:13.2458|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 14:30:13.2998|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 14:30:13.3182|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 14:30:13.3645|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 14:30:13.4657|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 14:30:13.4657|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 14:30:13.4849|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 14:30:13.4951|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 14:30:13.5159|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 14:30:13.5355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 14:30:13.5425|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 14:30:13.5425|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 14:30:13.6668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 14:30:13.6908|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 14:30:13.7142|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 14:30:13.7427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 14:30:13.7502|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 14:30:13.7502|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 14:30:13.7857|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 14:30:13.7989|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 14:30:13.8082|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 14:30:14.3118|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (494ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 14:30:14.3228|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 14:30:14.3228|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 14:30:14.3470|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 14:30:14.3605|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 14:30:14.3723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 14:30:14.3723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 14:30:14.3860|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 14:30:14.4087|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 14:30:14.4208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 14:30:14.4208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 14:30:14.4379|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 14:30:14.4466|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 14:30:14.4466|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 14:30:14.4688|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 14:30:14.4803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 14:30:14.4803|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 14:30:14.4964|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 14:30:14.5825|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 14:30:15.1730|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 14:30:15.1864|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 14:30:15.2003|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 14:30:15.2557|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 14:30:15.5480|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 291.259ms 404 text/plain
2020-08-29 14:30:38.6345|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PATCH http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 14:30:38.7019|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "partiallyUpdatedPointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult partiallyUpdatedPointOfIntrest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.Api.Models.PointOfInterestForUpdatingDto]) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 14:30:39.3011|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2020-08-29 14:30:39.3507|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.partiallyUpdatedPointOfIntrest (CityInfo.Api) in 622.5877ms
2020-08-29 14:30:39.3634|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 727.836ms 400 application/problem+json; charset=utf-8
2020-08-29 14:33:58.0638|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 14:33:58.0925|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 14:33:58.1523|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 14:33:58.7438|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (75ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 14:33:58.8200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 14:33:58.9372|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.PointOfInterestDto'.
2020-08-29 14:33:58.9549|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 854.8071ms
2020-08-29 14:33:58.9721|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 907.8173ms 200 application/json; charset=utf-8
2020-08-29 14:44:21.2769|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 14:44:27.8589|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 14:44:31.1776|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (129ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 14:44:31.4952|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (92ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 14:44:31.5545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (51ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 14:44:42.2670|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (587ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 14:44:42.4504|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (170ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 14:44:42.4906|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 14:44:42.9351|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 14:44:42.9460|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 14:44:42.9925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 14:44:43.0029|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 14:44:43.0258|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 14:44:43.1003|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 14:44:43.1106|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 14:44:43.1106|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 14:44:43.1223|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 14:44:43.1341|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 14:44:43.1341|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 14:44:43.1522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 14:44:43.1522|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 14:44:43.2431|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (50ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 14:44:43.2431|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 14:44:43.2691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 14:44:43.2923|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 14:44:43.2923|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 14:44:43.2923|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 14:44:43.3165|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 14:44:43.3232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 14:44:43.3232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 14:44:43.9423|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (603ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 14:44:43.9823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 14:44:44.0003|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 14:44:44.0321|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 14:44:44.0583|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 14:44:44.0822|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 14:44:44.0967|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 14:44:44.1121|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 14:44:44.1372|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 14:44:44.1542|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 14:44:44.1648|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 14:44:44.1648|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 14:44:44.1835|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 14:44:44.1835|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 14:44:44.2135|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 14:44:44.2280|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 14:44:44.2280|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 14:44:44.2470|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 14:44:44.3154|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 14:44:44.7176|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 14:44:44.7176|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 14:44:44.7280|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 14:44:44.7602|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 14:44:45.0784|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 307.2961ms 404 text/plain
2020-08-29 14:45:24.5241|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PATCH http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 14:45:24.6015|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "partiallyUpdatedPointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult partiallyUpdatedPointOfIntrest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.Api.Models.PointOfInterestForUpdatingDto]) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 14:45:25.6101|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2020-08-29 14:45:25.6601|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.partiallyUpdatedPointOfIntrest (CityInfo.Api) in 1038.7528ms
2020-08-29 14:45:25.6723|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 1145.9049ms 400 application/problem+json; charset=utf-8
2020-08-29 15:08:32.4451|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 15:08:38.4689|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:08:41.0905|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:08:41.4086|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (144ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 15:08:41.4652|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (50ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 15:08:52.0809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (487ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 15:08:52.2680|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (176ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 15:08:52.2985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:08:52.7172|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 15:08:52.7312|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:08:52.8441|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (90ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 15:08:52.8824|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 15:08:52.9744|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 15:08:53.0612|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 15:08:53.0717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 15:08:53.0717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 15:08:53.0898|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 15:08:53.1095|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 15:08:53.1260|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 15:08:53.1260|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 15:08:53.1380|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 15:08:53.2601|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:08:53.2823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:08:53.3066|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:08:53.3428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 15:08:53.3428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 15:08:53.3557|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 15:08:53.3876|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 15:08:53.3998|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 15:08:53.4290|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 15:08:53.9793|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (543ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 15:08:53.9793|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 15:08:54.0033|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 15:08:54.0290|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:08:54.0438|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 15:08:54.0577|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 15:08:54.0577|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 15:08:54.0763|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 15:08:54.1029|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 15:08:54.1202|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 15:08:54.1202|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 15:08:54.1427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 15:08:54.1516|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 15:08:54.1516|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 15:08:54.1877|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:08:54.2018|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 15:08:54.2189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 15:08:54.2281|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 15:08:54.3033|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 15:08:54.8101|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 15:08:54.8101|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 15:08:54.8308|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 15:08:54.9258|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 15:08:55.2358|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 318.2953ms 404 text/plain
2020-08-29 15:09:10.1134|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PATCH http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 15:09:10.1736|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "partiallyUpdatedPointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult partiallyUpdatedPointOfIntrest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.Api.Models.PointOfInterestForUpdatingDto]) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 15:09:10.6145|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2020-08-29 15:09:10.6344|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.partiallyUpdatedPointOfIntrest (CityInfo.Api) in 447.5265ms
2020-08-29 15:09:10.6344|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 529.8397ms 400 application/problem+json; charset=utf-8
2020-08-29 15:10:09.0529|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 15:10:15.2940|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:10:16.0967|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:10:16.3880|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (138ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 15:10:16.4686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (64ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 15:10:27.1485|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (534ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 15:10:27.3448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (184ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 15:10:27.3790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:10:27.9872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 15:10:27.9985|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:10:28.0732|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (59ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 15:10:28.0933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 15:10:28.1488|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 15:10:28.3028|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 15:10:28.3215|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 15:10:28.3215|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 15:10:28.3516|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 15:10:28.3890|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 15:10:28.4219|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 15:10:28.4342|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 15:10:28.4479|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 15:10:28.6212|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (79ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:10:28.6710|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:10:28.7315|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:10:28.8015|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (56ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 15:10:28.8185|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 15:10:28.8327|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 15:10:28.9113|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 15:10:28.9372|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 15:10:28.9563|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 15:10:29.7506|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (782ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 15:10:29.7689|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 15:10:29.7829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 15:10:29.8113|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:10:29.8332|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 15:10:29.8534|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 15:10:29.8534|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 15:10:29.8813|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 15:10:29.9132|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 15:10:29.9369|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 15:10:29.9557|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 15:10:29.9722|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 15:10:29.9873|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 15:10:30.0033|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 15:10:30.0342|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:10:30.0572|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 15:10:30.0764|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 15:10:30.0928|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 15:10:30.2102|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 15:10:30.7934|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 15:10:30.7934|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 15:10:30.8151|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 15:10:30.9008|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 15:10:31.3240|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 428.0477ms 404 text/plain
2020-08-29 15:10:42.9209|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PATCH http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 15:10:42.9830|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "partiallyUpdatedPointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult partiallyUpdatedPointOfIntrest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.Api.Models.PointOfInterestForUpdatingDto]) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 15:10:43.6019|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2020-08-29 15:10:43.6308|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.partiallyUpdatedPointOfIntrest (CityInfo.Api) in 631.2439ms
2020-08-29 15:10:43.6387|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 718.3058ms 400 application/problem+json; charset=utf-8
2020-08-29 15:18:48.9544|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 15:18:54.2303|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:18:56.7603|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:18:57.0728|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (116ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 15:18:57.1832|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (94ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 15:19:08.1595|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (820ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 15:19:08.3671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (192ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 15:19:08.4051|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:19:08.7167|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 15:19:08.7283|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:19:08.7945|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 15:19:08.8149|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 15:19:08.8767|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 15:19:08.9741|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 15:19:08.9832|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 15:19:08.9832|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 15:19:08.9992|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 15:19:09.0166|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 15:19:09.0346|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 15:19:09.0410|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 15:19:09.0410|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 15:19:09.1827|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (87ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:19:09.2281|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:19:09.2778|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:19:09.3462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (51ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 15:19:09.3668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 15:19:09.3814|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 15:19:09.4584|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 15:19:09.4879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 15:19:09.5086|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 15:19:10.3735|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (853ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 15:19:10.3906|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 15:19:10.4049|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 15:19:10.4366|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:19:10.4576|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 15:19:10.4766|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 15:19:10.4905|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 15:19:10.5058|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 15:19:10.5427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 15:19:10.5707|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 15:19:10.5871|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 15:19:10.6060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 15:19:10.6203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 15:19:10.6348|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 15:19:10.6666|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:19:10.6922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 15:19:10.7212|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 15:19:10.7375|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 15:19:10.8439|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 15:19:11.1462|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 15:19:11.1528|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 15:19:11.1528|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 15:19:11.2027|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 15:19:11.3885|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 187.8687ms 404 text/plain
2020-08-29 15:19:31.5797|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PATCH http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 15:19:31.7203|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "partiallyUpdatedPointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult partiallyUpdatedPointOfIntrest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.Api.Models.PointOfInterestForUpdatingDto]) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 15:19:33.0133|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2020-08-29 15:19:33.0799|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.partiallyUpdatedPointOfIntrest (CityInfo.Api) in 1326.4875ms
2020-08-29 15:19:33.0953|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 1520.4519ms 400 application/problem+json; charset=utf-8
2020-08-29 15:36:01.0631|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 15:36:07.3930|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:36:09.7810|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (49ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:36:10.0742|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (130ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 15:36:10.1250|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 15:36:20.8367|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (605ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 15:36:21.0168|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (167ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 15:36:21.0488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:36:21.4615|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 15:36:21.4615|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:36:21.5368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 15:36:21.5585|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 15:36:21.6188|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 15:36:21.7187|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 15:36:21.7307|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 15:36:21.7307|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 15:36:21.7499|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 15:36:21.7749|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 15:36:21.7935|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 15:36:21.7935|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 15:36:21.8079|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 15:36:21.9291|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:36:21.9682|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:36:22.0098|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:36:22.0746|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (51ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 15:36:22.0915|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 15:36:22.1058|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 15:36:22.1685|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 15:36:22.1947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 15:36:22.2117|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 15:36:23.1013|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (878ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 15:36:23.1192|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 15:36:23.1342|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 15:36:23.1610|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:36:23.1820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 15:36:23.1997|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 15:36:23.2129|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 15:36:23.2269|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 15:36:23.2610|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 15:36:23.2867|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 15:36:23.3053|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 15:36:23.3208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 15:36:23.3361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 15:36:23.3361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 15:36:23.3800|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:36:23.4014|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 15:36:23.4200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 15:36:23.4363|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 15:36:23.5404|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 15:36:24.2275|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 15:36:24.2275|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 15:36:24.2477|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 15:36:24.3415|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 15:36:24.7286|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 390.4071ms 404 text/plain
2020-08-29 15:37:06.2657|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PATCH http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 15:37:06.3483|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "partiallyUpdatedPointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult partiallyUpdatedPointOfIntrest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.Api.Models.PointOfInterestForUpdatingDto]) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 15:37:07.3366|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:37:07.8893|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (79ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 15:37:07.9925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 15:37:47.3393|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 15:37:53.3203|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:37:54.8949|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (117ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:37:55.4207|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (185ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 15:37:55.5119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (77ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 15:38:06.5022|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (879ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 15:38:06.6933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (179ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 15:38:06.7206|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:38:07.2780|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 15:38:07.2922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:38:07.3544|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (49ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 15:38:07.3702|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 15:38:07.4266|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 15:38:07.5488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 15:38:07.5582|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 15:38:07.5582|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 15:38:07.5753|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 15:38:07.5932|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 15:38:07.6085|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 15:38:07.6085|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 15:38:07.6191|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 15:38:07.7318|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (68ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:38:07.7573|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:38:07.7824|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:38:07.8190|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 15:38:07.8362|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 15:38:07.8362|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 15:38:07.9191|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 15:38:07.9474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 15:38:07.9689|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 15:38:08.5751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (596ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 15:38:08.5902|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 15:38:08.6038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 15:38:08.6255|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:38:08.6442|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 15:38:08.6596|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 15:38:08.6684|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 15:38:08.6684|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 15:38:08.7066|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 15:38:08.7311|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 15:38:08.7440|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 15:38:08.7440|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 15:38:08.7681|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 15:38:08.7796|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 15:38:08.8050|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:38:08.8255|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 15:38:08.8396|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 15:38:08.8396|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 15:38:08.9202|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 15:38:09.5025|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 15:38:09.5126|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 15:38:09.5257|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 15:38:09.6130|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 15:38:09.8905|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 276.2779ms 404 text/plain
2020-08-29 15:38:43.9340|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PATCH http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 15:38:43.9968|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "partiallyUpdatedPointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult partiallyUpdatedPointOfIntrest(Int32, Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[CityInfo.Api.Models.PointOfInterestForUpdatingDto]) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 15:38:44.9496|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:38:45.5156|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (79ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 15:38:45.5970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 15:38:45.9155|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [pointsOfInterest] SET [Name] = @p0
WHERE [id] = @p1;
SELECT @@ROWCOUNT;
2020-08-29 15:38:45.9642|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing HttpStatusCodeResult, setting HTTP status code 204
2020-08-29 15:38:45.9827|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.partiallyUpdatedPointOfIntrest (CityInfo.Api) in 1967.3798ms
2020-08-29 15:38:45.9957|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 2061.8591ms 204 
2020-08-29 15:38:55.9609|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 15:38:55.9784|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 15:38:56.0765|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:38:56.0932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 15:38:56.0932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 15:38:56.1782|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.PointOfInterestDto'.
2020-08-29 15:38:56.2435|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 254.5118ms
2020-08-29 15:38:56.2435|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 293.532ms 200 application/xml; charset=utf-8
2020-08-29 15:49:38.4101|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 15:49:46.3592|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:49:49.0254|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (54ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:49:49.3550|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (137ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 15:49:49.4316|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (67ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 15:50:00.1328|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (586ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 15:50:00.3191|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (173ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 15:50:00.3530|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:50:00.8459|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 15:50:00.8553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:50:00.9123|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 15:50:00.9340|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 15:50:01.0296|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 15:50:01.2397|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 15:50:01.2573|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 15:50:01.2711|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 15:50:01.2892|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 15:50:01.3367|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 15:50:01.3749|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 15:50:01.3872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 15:50:01.4013|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 15:50:01.6203|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (103ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:50:01.6520|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:50:01.6768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:50:01.7179|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 15:50:01.7179|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 15:50:01.7335|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 15:50:01.7699|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 15:50:01.7865|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 15:50:01.7977|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 15:50:02.5567|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (749ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 15:50:02.5755|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 15:50:02.5928|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 15:50:02.6245|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:50:02.6486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 15:50:02.6695|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 15:50:02.6834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 15:50:02.6986|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 15:50:02.7448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 15:50:02.7684|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 15:50:02.7789|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 15:50:02.7789|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 15:50:02.7973|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 15:50:02.8086|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 15:50:02.8303|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:50:02.8442|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 15:50:02.8570|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 15:50:02.8570|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 15:50:02.9251|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 15:50:03.5261|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 15:50:03.5261|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 15:50:03.5432|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 15:50:03.5996|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 15:50:03.8768|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 280.6458ms 404 text/plain
2020-08-29 15:54:50.4267|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 DELETE http://localhost:1028/api/cities/1/pointsofinterest/1  
2020-08-29 15:54:50.4951|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "DeletePointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeletePointOfIntrest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 15:54:51.1581|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:54:51.7537|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (78ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 15:54:51.8449|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 15:54:51.9641|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing HttpStatusCodeResult, setting HTTP status code 204
2020-08-29 15:54:51.9832|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.DeletePointOfIntrest (CityInfo.Api) in 1468.9401ms
2020-08-29 15:54:51.9994|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 1580.9358ms 204 
2020-08-29 15:54:58.0330|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1/pointsofinterest/1  
2020-08-29 15:54:58.0478|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 15:54:58.1327|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:54:58.1495|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 15:54:58.1658|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 15:54:58.3175|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.PointOfInterestDto'.
2020-08-29 15:54:58.3840|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 323.2574ms
2020-08-29 15:54:58.3840|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 359.4714ms 200 application/xml; charset=utf-8
2020-08-29 15:55:37.2171|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 15:55:37.2171|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 15:55:37.2426|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:55:37.2601|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 15:55:37.2601|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 15:55:37.2850|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.PointOfInterestDto'.
2020-08-29 15:55:37.2929|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 60.1966ms
2020-08-29 15:55:37.2929|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 83.7906ms 200 application/xml; charset=utf-8
2020-08-29 15:56:15.8940|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1?includepointsofinterest=true  
2020-08-29 15:56:15.9085|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetCity", controller = "CityControllers"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetCity(Int32, Boolean) on controller CityInfo.Api.Contollers.CityControllers (CityInfo.Api).
2020-08-29 15:56:15.9250|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:56:16.1644|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[id], [t].[Description], [t].[Name], [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM (
    SELECT TOP(1) [c].[id], [c].[Description], [c].[Name]
    FROM [Cities] AS [c]
    WHERE [c].[id] = @__cityId_0
) AS [t]
LEFT JOIN [pointsOfInterest] AS [p] ON [t].[id] = [p].[cityId]
ORDER BY [t].[id], [p].[id]
2020-08-29 15:56:16.3082|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'CityInfo.Api.Models.CityDTo'.
2020-08-29 15:56:16.3656|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.CityControllers.GetCity (CityInfo.Api) in 430.6568ms
2020-08-29 15:56:16.3795|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 480.8865ms 200 application/xml; charset=utf-8
2020-08-29 15:59:33.5432|INFO|CityInfo.Api.Program|initialing app...
2020-08-29 15:59:37.8435|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 15:59:38.7772|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (56ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:59:39.2415|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (146ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-29 15:59:39.3316|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (77ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [CityInfoDB];
2020-08-29 15:59:50.0331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (532ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [CityInfoDB];
2020-08-29 15:59:50.2211|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (175ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-29 15:59:50.2550|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:59:50.6691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-29 15:59:50.6691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2020-08-29 15:59:50.7491|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (58ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-29 15:59:50.7700|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-29 15:59:50.8359|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827204955_CityInfoDBIntialMigration'.
2020-08-29 15:59:50.9401|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Cities] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(200) NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([id])
);
2020-08-29 15:59:50.9521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [pointsOfInterest] (
    [id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [cityId] int NOT NULL,
    CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]),
    CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE
);
2020-08-29 15:59:50.9521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_pointsOfInterest_cityId] ON [pointsOfInterest] ([cityId]);
2020-08-29 15:59:50.9686|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827204955_CityInfoDBIntialMigration', N'3.1.7');
2020-08-29 15:59:50.9938|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200827210924_CityInfoDBAddPOIMigration'.
2020-08-29 15:59:51.0119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD [Description] nvarchar(200) NULL;
2020-08-29 15:59:51.0119|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200827210924_CityInfoDBAddPOIMigration', N'3.1.7');
2020-08-29 15:59:51.0262|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828094505_SampleData'.
2020-08-29 15:59:51.1601|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (1, N'The one with that big park.', N'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:59:51.1868|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (2, N'The one with the cathedral that was never really finished.', N'Antwerp');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:59:51.2106|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([id], [Description], [Name])
VALUES (3, N'The one with that big tower.', N'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2020-08-29 15:59:51.2479|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] ON;
INSERT INTO [pointsOfInterest] ([id], [Description], [Name], [cityId])
VALUES (1, N'The most visited urban park in the United States.', N'Central Park', 1),
(2, N'A 102-story skyscraper located in Midtown Manhattan.', N'Empire State Building', 1),
(3, N'A Gothic style cathedral, conceived by architects Jan and Pieter Appelmans.', N'Cathedral', 2),
(4, N'The the finest example of railway architecture in Belgium.', N'Antwerp Central Station', 2),
(5, N'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', N'Eiffel Tower', 3),
(6, N'The world''s largest museum.', N'The Louvre', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'id', N'Description', N'Name', N'cityId') AND [object_id] = OBJECT_ID(N'[pointsOfInterest]'))
    SET IDENTITY_INSERT [pointsOfInterest] OFF;
2020-08-29 15:59:51.2479|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828094505_SampleData', N'3.1.7');
2020-08-29 15:59:51.2662|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104147_Del'.
2020-08-29 15:59:51.3092|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [FK_pointsOfInterest_Cities_cityId];
2020-08-29 15:59:51.3247|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] DROP CONSTRAINT [PK_pointsOfInterest];
2020-08-29 15:59:51.3247|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] DROP CONSTRAINT [PK_Cities];
2020-08-29 15:59:51.9393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (599ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest]', N'PointOfInterest';
2020-08-29 15:59:51.9487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[Cities]', N'City';
2020-08-29 15:59:51.9487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest].[IX_pointsOfInterest_cityId]', N'IX_PointOfInterest_cityId', N'INDEX';
2020-08-29 15:59:51.9717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [PK_PointOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:59:51.9870|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] ADD CONSTRAINT [PK_City] PRIMARY KEY ([id]);
2020-08-29 15:59:51.9977|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] ADD CONSTRAINT [FK_PointOfInterest_City_cityId] FOREIGN KEY ([cityId]) REFERENCES [City] ([id]) ON DELETE CASCADE;
2020-08-29 15:59:51.9977|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104147_Del', N'3.1.7');
2020-08-29 15:59:52.0123|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20200828104404_BackToDeFault'.
2020-08-29 15:59:52.0298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [FK_PointOfInterest_City_cityId];
2020-08-29 15:59:52.0435|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [PointOfInterest] DROP CONSTRAINT [PK_PointOfInterest];
2020-08-29 15:59:52.0435|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [City] DROP CONSTRAINT [PK_City];
2020-08-29 15:59:52.0620|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[PointOfInterest]', N'pointsOfInterest';
2020-08-29 15:59:52.0712|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[City]', N'Cities';
2020-08-29 15:59:52.0712|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
EXEC sp_rename N'[pointsOfInterest].[IX_PointOfInterest_cityId]', N'IX_pointsOfInterest_cityId', N'INDEX';
2020-08-29 15:59:52.0978|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [PK_pointsOfInterest] PRIMARY KEY ([id]);
2020-08-29 15:59:52.1096|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Cities] ADD CONSTRAINT [PK_Cities] PRIMARY KEY ([id]);
2020-08-29 15:59:52.1210|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [pointsOfInterest] ADD CONSTRAINT [FK_pointsOfInterest_Cities_cityId] FOREIGN KEY ([cityId]) REFERENCES [Cities] ([id]) ON DELETE CASCADE;
2020-08-29 15:59:52.1210|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200828104404_BackToDeFault', N'3.1.7');
2020-08-29 15:59:52.1852|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-29 15:59:52.5940|INFO|Microsoft.Hosting.Lifetime|Application started. Press Ctrl+C to shut down.
2020-08-29 15:59:52.5940|INFO|Microsoft.Hosting.Lifetime|Hosting environment: Development
2020-08-29 15:59:52.6084|INFO|Microsoft.Hosting.Lifetime|Content root path: C:\Users\User\source\repos\CityInfo.Api\CityInfo.Api
2020-08-29 15:59:52.6638|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/  
2020-08-29 15:59:52.8652|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 205.5148ms 404 text/plain
2020-08-29 16:01:11.3568|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 DELETE http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 16:01:11.4351|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "DeletePointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeletePointOfIntrest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 16:01:12.1227|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 16:01:12.8183|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (90ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 16:01:12.9241|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 16:01:13.2832|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [pointsOfInterest]
WHERE [id] = @p0;
SELECT @@ROWCOUNT;
2020-08-29 16:01:13.3319|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing HttpStatusCodeResult, setting HTTP status code 204
2020-08-29 16:01:13.3494|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.DeletePointOfIntrest (CityInfo.Api) in 1897.6658ms
2020-08-29 16:01:13.3632|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 2007.5792ms 204 
2020-08-29 16:01:18.4205|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 DELETE http://localhost:1028/api/cities/1/pointsofinterest/1 application/json 101
2020-08-29 16:01:18.4317|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "DeletePointOfIntrest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeletePointOfIntrest(Int32, Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 16:01:18.5327|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 16:01:18.5526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 16:01:18.5620|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE ([p].[cityId] = @__cityId_0) AND ([p].[id] = @__pointOfInterestId_1)
2020-08-29 16:01:18.6201|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2020-08-29 16:01:18.6782|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.DeletePointOfIntrest (CityInfo.Api) in 239.785ms
2020-08-29 16:01:18.6852|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 264.809ms 404 application/problem+xml; charset=utf-8
2020-08-29 16:01:49.2222|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 DELETE http://localhost:1028/api/cities/1/pointsofinterest application/json 101
2020-08-29 16:01:49.2512|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 28.7739ms 404 text/plain
2020-08-29 16:02:01.2465|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 DELETE http://localhost:1028/api/cities/1 application/json 101
2020-08-29 16:02:01.2465|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 13.2859ms 404 text/plain
2020-08-29 16:02:17.4276|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET http://localhost:1028/api/cities/1/pointsofinterest application/json 101
2020-08-29 16:02:17.4426|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetPointOfInterest", controller = "PointOfInterest"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetPointOfInterest(Int32) on controller CityInfo.Api.Contollers.PointOfInterestController (CityInfo.Api).
2020-08-29 16:02:17.4608|INFO|Microsoft.EntityFrameworkCore.Infrastructure|Entity Framework Core 3.1.7 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2020-08-29 16:02:17.4723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__cityid_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[id] = @__cityid_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2020-08-29 16:02:17.4933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[id], [p].[Description], [p].[Name], [p].[cityId]
FROM [pointsOfInterest] AS [p]
WHERE [p].[cityId] = @__cityId_0
2020-08-29 16:02:17.5529|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.Api.Models.PointOfInterestDto, CityInfo.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2020-08-29 16:02:17.5659|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action CityInfo.Api.Contollers.PointOfInterestController.GetPointOfInterest (CityInfo.Api) in 116.9169ms
2020-08-29 16:02:17.5729|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished in 144.6301ms 200 application/xml; charset=utf-8
